<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · MPCCModelManager.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>MPCCModelManager.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a><ul class="internal"><li><a class="tocitem" href="#Installation"><span>Installation</span></a></li><li><a class="tocitem" href="#Basic-Usage-Description"><span>Basic Usage Description</span></a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="manual/function_list/">Functions and structs</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PeterMaxwell/MPCCModelManager.jl/blob/master/docs/src/index.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="MPCCModelManager.jl"><a class="docs-heading-anchor" href="#MPCCModelManager.jl">MPCCModelManager.jl</a><a id="MPCCModelManager.jl-1"></a><a class="docs-heading-anchor-permalink" href="#MPCCModelManager.jl" title="Permalink"></a></h1><p>!!! <strong>DEVELOPMENT VERSION</strong> – There will be breaking changes to come.</p><p>MPCCModelManager.jl is a package for managing parametric MPCC or NLP models of the form</p><p class="math-container">\[\begin{equation}
\begin{aligned}
\min_{x(p(t))} \quad &amp; f(p(t), x(p(t))) \\
\textrm{subject to} \quad &amp; c_{\mathcal{E},i}(p(t), x(p(t))) = 0 \quad i = 1, \dots, m_{\mathcal{E}}\\
&amp; c_{\mathcal{I},i}(p(t), x(p(t))) \ge 0 \quad i = 1, \dots, m_{\mathcal{I}} \\
&amp; F_{i,j}(p(t), x(p(t))) \ge 0 \quad i = 1, \dots l, \; j = 1, \dots, q \\
&amp; \prod_{i=1}^{l} F_{i,j} = 0 \quad j = 1, \dots, q.
\end{aligned}
\end{equation}\]</p><p>The idea is that one can supply a model definition in various formats such as a native Julia definition, JSON, etc.</p><p>The library will then generate Julia native functions that will calculate the Jacobians, Hessians, and parameteric derivatives thereof. There is choice in how the derivatives are computed, e.g. dense matrix outputs via automatic differentiation (ForwardDiff.jl for now), sparse symbolic differentiation, etc.</p><h2 id="Installation"><a class="docs-heading-anchor" href="#Installation">Installation</a><a id="Installation-1"></a><a class="docs-heading-anchor-permalink" href="#Installation" title="Permalink"></a></h2><p>The package is not registered yet, so this must be done manually at the moment.</p><h2 id="Basic-Usage-Description"><a class="docs-heading-anchor" href="#Basic-Usage-Description">Basic Usage Description</a><a id="Basic-Usage-Description-1"></a><a class="docs-heading-anchor-permalink" href="#Basic-Usage-Description" title="Permalink"></a></h2><p>Each model has a dimension specification <code>MPCCDimSpec</code>, which details:</p><ul><li><code>n</code>: The number of spatial coordinates.</li><li><code>l</code>: The number of expressions in each complementarity constraint.</li><li><code>q</code>: The numebr of complementarity constraints.</li><li><code>me</code>: The number of equality constraints.</li><li><code>mi</code>: The number of inequality constraints.</li><li><code>r</code>: The number of continuous parameters, which are assumed implicitly dependent on some real scalar, say &quot;t&quot;.</li><li><code>s</code>: The number of integer parameters, not used yet.</li></ul><p>There are some sample models under <code>./src/model_samples</code>. In the future, this will be in a different package and there&#39;ll be functionality to import from JSON, etc. For the moment, when defining you own models, just follow the same pattern.</p><p>Instantiate the model configuration, e.g. using the model kj3:</p><p><code>model_cfg = model_pmpcc_kj3_build();</code></p><p>This struct contains, amongst other things, the following fields:</p><ul><li><code>dimspec</code>: Dimensions of the model.</li><li><code>x</code>: Symbolics Num variables vector for <code>x</code> (spatial).</li><li><code>pr</code>: Symbolics Num variables vector for parametric variables (actually functions dependant on some supplied &quot;t&quot;.</li><li><code>ps</code>: Symbolics Num variables vector for parametric integer variables (not really used).</li><li><code>defn</code>: Symbolic expressions for the model including <code>f</code>, <code>ce</code>, <code>ci</code>, <code>F</code>.</li><li><code>fns</code>: Julia native compiled functions mapping directly to <code>defn</code>.</li><li><code>knownsols</code>: For test problems, there may be a closed expression for the parametric solution.</li><li><code>parameterisations</code>: Defines the functional relationship of <code>pr</code> to some real scalar (this is important when <code>r &gt; 1</code>).</li></ul><p>Now, from the model config, we&#39;d like to instantiate the functions that will actually do the work for us. In the future, there will be a choice here, e.g. there&#39;ll be the option of symbolic differentiation producing sparse output.  For now though, it&#39;s only automatic differentiation implemented against ForwardDiff.jl.</p><p><code>model_fd = mpccmodel_setup_forwarddiff_dense(model_cfg);</code></p><p>This returns a struct which includes the model configuration, and also the following functions (standard and mutating).</p><ul><li><code>f</code>, <code>f!</code>: Objective function (scalar, I think).</li><li><code>ce</code>, <code>ce!</code>: Equality constraints (vector).</li><li><code>ci</code>, <code>ci!</code>: Inqquality constraints (vector).</li><li><code>F,</code> <code>F!</code>: Comlementarity constraints (matrix).</li><li><code>Fq</code>, <code>Fq!</code>: Product of complementarity contraints (vector), for penalty method.</li><li><code>gradf</code>, <code>gradf!</code>: Row vector gradient of <code>f</code> (vector).</li><li><code>jacce</code>, <code>jacce!</code>: Jacobian of <code>ce</code>, (<code>me</code> by <code>n</code> matrix).</li><li><code>jacci</code>, <code>jacci!</code>: Jacobian of <code>ci</code>, (<code>mi</code> by <code>n</code> matrix).</li><li><code>gradF</code>, <code>gradF!</code>:  Gradients of <code>F</code>, (<code>l</code> by <code>q</code> matrix of length <code>n</code> vectors).</li><li><code>gradFq</code>, <code>gradFq!</code>: </li><li><code>hessf</code>, <code>hessf!</code>: Hessian of <code>f</code>.</li><li><code>hessce</code>, <code>hessce!</code>: Hessians of <code>ce</code> (length <code>me</code> vector of <code>n</code> by <code>n</code> matrices)</li><li><code>hessci</code>, <code>hessci!</code>: Hessians of <code>ci</code> (length <code>mi</code> vector of <code>n</code> by <code>n</code> matrices)</li><li><code>hessF</code>, <code>hessF!</code>: Hessians of <code>F</code> (<code>l</code> by <code>q</code> matrix of <code>n</code> by <code>n</code> matrices)</li><li><code>hessFq</code>, <code>hessFq!</code>: </li><li><code>fdp</code>, <code>fdp!</code>: Gradient of <code>f</code> wrt <code>pr</code> (vector of length <code>r</code>)</li><li><code>cedp</code>, <code>cedp!</code>: Gradient of <code>ce</code> wrt <code>pr</code> (vector of length <code>r</code> of vector of length <code>me</code>)</li><li><code>cidp</code>, <code>cidp!</code>: Gradient of <code>ci</code> wrt <code>pr</code> (vector of length <code>r</code> of vector of length <code>mi</code>)</li><li><code>Fdp</code>, <code>Fdp!</code>: Gradient of <code>F</code> wrt <code>pr</code> (vector of length <code>r</code> of matrix of size <code>l</code> by <code>q</code>)</li><li><code>gradfdp</code>, <code>gradfdp!</code>: Gradient wrt <code>pr</code> of gradient wrt <code>x</code> (vector of length <code>r</code> of vector of length <code>n</code>)</li><li><code>jaccedp</code>, <code>jaccedp!</code>: Gradient wrt <code>pr</code> of Jacobian of <code>ce</code> (vector of length <code>r</code> of matrix of size <code>me</code> by <code>n</code>)</li><li><code>jaccidp</code>, <code>jaccidp!</code>: Gradient wrt <code>pr</code> of Jacobian of <code>ci</code> (vector of length <code>r</code> of matrix of size <code>mi</code> by <code>n</code>)</li><li><code>gradFdp</code>, <code>gradFdp!</code>: Gradient wrt <code>pr</code> of spatial gradients of <code>F</code> (vector of length <code>r</code> or matrix of size <code>l</code> by <code>q</code> of vector of length <code>n</code>)</li></ul><p>Each of the functions accepts a primal position <code>x</code>, continuous parameters <code>pr</code> (<span>$p$</span> in the model), and discrete parameters <code>ps</code>.</p></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="manual/function_list/">Functions and structs »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Thursday 10 November 2022 10:03">Thursday 10 November 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
